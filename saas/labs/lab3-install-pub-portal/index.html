
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://microsoft.github.io/Mastering-the-Marketplace/saas/labs/lab3-install-pub-portal/">
      
      
      
      <link rel="icon" href="../../../favicon.ico">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.2">
    
    
      
        <title>Lab 3 - Installing a Publisher Portal - Mastering the Marketplace</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.7bf56d0a.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-QFBKKPKXNV"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-QFBKKPKXNV",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-QFBKKPKXNV",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  <meta content="https://blogs.microsoft.com/wp-content/uploads/2012/08/8867.Microsoft_5F00_Logo_2D00_for_2D00_screen.jpg" property="image">
  <meta content="https://blogs.microsoft.com/wp-content/uploads/2012/08/8867.Microsoft_5F00_Logo_2D00_for_2D00_screen.jpg" property="og:image">

  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="#0078D4" data-md-color-accent="light-blue">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#lab-3-installing-a-publisher-portal" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://microsoft.github.io/Mastering-the-Marketplace/" title="Mastering the Marketplace" class="md-header__button md-logo" aria-label="Mastering the Marketplace" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M0 32h214.6v214.6H0V32zm233.4 0H448v214.6H233.4V32zM0 265.4h214.6V480H0V265.4zm233.4 0H448V480H233.4V265.4z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Mastering the Marketplace
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Lab 3 - Installing a Publisher Portal
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/microsoft/Mastering-the-Marketplace" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    microsoft/Mastering-the-Marketplace
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://microsoft.github.io/Mastering-the-Marketplace/" title="Mastering the Marketplace" class="md-nav__button md-logo" aria-label="Mastering the Marketplace" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M0 32h214.6v214.6H0V32zm233.4 0H448v214.6H233.4V32zM0 265.4h214.6V480H0V265.4zm233.4 0H448V480H233.4V265.4z"/></svg>

    </a>
    Mastering the Marketplace
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/microsoft/Mastering-the-Marketplace" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    microsoft/Mastering-the-Marketplace
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
      
      
      
        <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
          Courses by offer type
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Courses by offer type
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="/Mastering-the-Marketplace/ama/" class="md-nav__link">
        Azure Managed Applications
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="/Mastering-the-Marketplace/container/" class="md-nav__link">
        Container offers for K8s apps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="/Mastering-the-Marketplace/saas/" class="md-nav__link">
        SaaS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="/Mastering-the-Marketplace/vm/" class="md-nav__link">
        Virtual Machines
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="/Mastering-the-Marketplace/teams/" class="md-nav__link">
        Teams
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Bonus content
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Bonus content
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="/Mastering-the-Marketplace/saas-accelerator/" class="md-nav__link">
        SaaS Accelerator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="/Mastering-the-Marketplace/partner-center/" class="md-nav__link">
        Partner Center
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          More resources
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          More resources
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="/Mastering-the-Marketplace/misc/select-offer-type" class="md-nav__link">
        🌐 Choose your offer type
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="/Mastering-the-Marketplace/learning-paths/" class="md-nav__link">
        🚦 Learning paths
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="/Mastering-the-Marketplace/learning-paths/customer" class="md-nav__link">
        🔎 For your customers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://microsoftcloudpartner.eventbuilder.com/MarketplaceOverviewandQAforPartners" class="md-nav__link">
        📆 Marketplace Office Hours
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="/Mastering-the-Marketplace/misc/change-log" class="md-nav__link">
        🗒️ Site change log
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://forms.office.com/r/0gCrzhSMkw" class="md-nav__link">
        ✉️ Contact us
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercise-create-an-app-registration" class="md-nav__link">
    Exercise: Create an app registration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-a-secret" class="md-nav__link">
    Add a secret
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercise-configure-appsettingsjson" class="md-nav__link">
    Exercise: Configure appsettings.json
  </a>
  
    <nav class="md-nav" aria-label="Exercise: Configure appsettings.json">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#azuread-section" class="md-nav__link">
    AzureAD section
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#marketplaceapi-section" class="md-nav__link">
    MarketplaceApi section
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercise-create-an-app-service-and-publish-profile-for-the-publisher-portal-application" class="md-nav__link">
    Exercise: Create an App Service and publish profile for the Publisher Portal application
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercise-publish-the-publisher-portal-application" class="md-nav__link">
    Exercise: Publish the Publisher Portal application
  </a>
  
    <nav class="md-nav" aria-label="Exercise: Publish the Publisher Portal application">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#update-the-application-registration" class="md-nav__link">
    Update the application registration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercise-as-a-customer-request-subscription-activation" class="md-nav__link">
    Exercise: As a customer, request subscription activation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercise-as-the-publisher-activate-the-customers-subscription" class="md-nav__link">
    Exercise: As the publisher, activate the customer's subscription
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercise-see-the-activation-on-the-client-side" class="md-nav__link">
    Exercise: See the activation on the client side
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="lab-3-installing-a-publisher-portal">Lab 3 - Installing a Publisher Portal<a class="headerlink" href="#lab-3-installing-a-publisher-portal" title="Permanent link">#</a></h1>
<p>👈 <a href="../../#labs">Back to SaaS Offer labs</a></p>
<p>⚠️ Completion of this lab is required for the following labs in the series to work properly.</p>
<blockquote>
<p>💀 The code in this lab is <strong>NOT</strong> meant to be used for production environments. It is a simple example with no error handling, no custom workflows, and is for learning purposes only.</p>
</blockquote>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">#</a></h2>
<p>This is a quick lab in which you will create one app registration and deploy a small website used by the publisher for activating customer subscriptions. After you have the new website installed, the customer can use their landing page to request subscription activation and use the publisher portal to activate the subscription.</p>
<h2 id="exercise-create-an-app-registration">Exercise: Create an app registration<a class="headerlink" href="#exercise-create-an-app-registration" title="Permanent link">#</a></h2>
<p>In this exercise, you will create a single-tenant app registration for the internal Publisher Portal application. This allows accounts you designate within your own tenant to access the application.</p>
<ol>
<li>Log in to the Azure portal.</li>
<li>In the top-of-center command window in the portal, type "app reg" and select the item "App registrations" that appears. You will see a list of current app registrations.</li>
<li>At the top of the page, click the <strong>+ New registration</strong> link. You are taken to the <strong>Register an application page</strong>.</li>
<li>Use <code>saas-workshop-publisher</code> as the name of this app registration.</li>
<li>At the bottom of the page, click the <strong>Register</strong> button.</li>
</ol>
<h2 id="add-a-secret">Add a secret<a class="headerlink" href="#add-a-secret" title="Permanent link">#</a></h2>
<p>Now you will add a secret to the app registration. Make sure to copy and paste the secret value somewhere you can access it later.</p>
<ol>
<li>Click into the <strong>saas-workshop-publisher</strong> application registration.</li>
<li>In the left-hand menu, find the <strong>Manage</strong> menu and click the <strong>Certificates and secrets</strong> link.</li>
<li>Create a new client secret.<ol>
<li>Give it a description.</li>
<li>Choose an expiration date. The 6-month default should be fine.</li>
</ol>
</li>
<li>Copy the <strong>Value</strong> of the secret and paste it somewhere you can easily access it later.</li>
</ol>
<h2 id="exercise-configure-appsettingsjson">Exercise: Configure appsettings.json<a class="headerlink" href="#exercise-configure-appsettingsjson" title="Permanent link">#</a></h2>
<p>Now you configure the <code>appsettings.json</code> file for the Publisher Portal application so you can publish it.</p>
<h3 id="azuread-section">AzureAD section<a class="headerlink" href="#azuread-section" title="Permanent link">#</a></h3>
<ol>
<li>In Visual Studio, open the <code>appsetting.json</code> file in the <strong>PublisherPortal</strong> project.</li>
<li>Replace <code>YOUR_DOMAIN</code> with the same value you use in the <code>appsettings.json</code> file for the LandingPage project.</li>
<li>Replace <code>TENANT_ID</code> with the Tenant ID of the tenant you are working in. To find the Tenant ID, do the following.<ol>
<li>Type <strong>Tenant</strong> into the command bar at the top of the Azure portal and select <strong>Tenant properties</strong>.</li>
<li>Find the <strong>Tenant ID</strong> field and copy the value into the <code>appsettings.json</code> file.</li>
</ol>
</li>
<li>Replace <code>CLIENT_ID</code> with the <strong>Application (client) ID</strong> of the app registration you created in the above exercise.</li>
<li>Replace <code>CLIENT_SECRET</code> with the secret you created in the above exercise.</li>
</ol>
<h3 id="marketplaceapi-section">MarketplaceApi section<a class="headerlink" href="#marketplaceapi-section" title="Permanent link">#</a></h3>
<p>For the <code>MarketplaceApi</code> section, you may copy and paste the section from the LandingPage project's <code>appsettings.json</code> file. It is an exact copy.</p>
<h2 id="exercise-create-an-app-service-and-publish-profile-for-the-publisher-portal-application">Exercise: Create an App Service and publish profile for the Publisher Portal application<a class="headerlink" href="#exercise-create-an-app-service-and-publish-profile-for-the-publisher-portal-application" title="Permanent link">#</a></h2>
<p>In this section, you'll create an App Service for your new portal so you can publish it in the next step.</p>
<ol>
<li>Right click the project in Visual Studio and select <strong>Publish</strong>.</li>
<li>Select <strong>Azure</strong> as your target and then click the <strong>Next</strong> button.</li>
<li>Select <strong>Azure App Service (Windows)</strong> and then click the <strong>Next</strong> button.</li>
<li>Click the green <strong>+</strong> button to create a new App Service and the App Service creation dialog appears.</li>
<li>Enter <strong>SaaSWorkshopPublisherPortal</strong> with a number suffix as the name of the app service.</li>
<li>Set the Resource Group to <code>saas-workshop</code>.</li>
<li>Set the App service plan to the one you created earlier, likely named <strong>SaaSWorkshopAppServicePlan</strong>.</li>
<li>Click the <strong>Create</strong> button to create the App Service and be taken back to the Publish dialog.</li>
<li>Select your new App Service instance.</li>
<li>Click the <strong>Next</strong> button.</li>
<li>Select the <strong>Publish</strong> option to create a publish profile.</li>
<li>Click the <strong>Finish</strong> button.</li>
</ol>
<h2 id="exercise-publish-the-publisher-portal-application">Exercise: Publish the Publisher Portal application<a class="headerlink" href="#exercise-publish-the-publisher-portal-application" title="Permanent link">#</a></h2>
<p>Now that you are back to the publish dialog, just click the Publish button in the upper-right of the page to publish your website.</p>
<p>This may take a few moments for the site to publish. You can monitor publish progress in Visual Studio's output window.</p>
<blockquote>
<p>The page will launch, but shows an error message. You aren't quite done configuring the publisher portal application.</p>
</blockquote>
<h3 id="update-the-application-registration">Update the application registration<a class="headerlink" href="#update-the-application-registration" title="Permanent link">#</a></h3>
<ol>
<li>In the command bar at the top of the Azure portal, search for and select <strong>App Services</strong>.</li>
<li>Click on the App Service you've just created, <strong>SaaSWorkshopPublisherPortal</strong> with a number suffix.</li>
<li>On the overview screen in Visual Studio, the <strong>URL</strong> for the site should be in the <strong>Hosting</strong> section. Copy it into your paste buffer.</li>
<li>In the command bar at the top of the Azure portal, search for and select <strong>App registrations</strong>.</li>
<li>Click on the <code>saas-workshop-publisher</code> app registration.</li>
<li>In the left-hand menu click the <strong>Authentication</strong> link.</li>
<li>Click on <strong>Add a platform</strong> under <strong>Platform configurations</strong>.</li>
<li>Select <strong>Web</strong> tile under <strong>Configure platforms</strong>.</li>
<li>Paste in your publisher portal application URL under <strong>Redirect URIs</strong> and click <strong>Configure</strong>.</li>
<li>In the <strong>Web &gt; Redirect URIs</strong> section, click <strong>Add URI</strong>.  </li>
<li>
<p>Paste your publisher portal application URL in again on another line, this time adding a suffix of <code>/signin-oidc</code> so that your URI looks something like this.</p>
<blockquote>
<p>https://*.azurewebsites.net/signin-oidc</p>
</blockquote>
</li>
<li>
<p>Click the <strong>Save</strong> button at the top of the screen. </p>
</li>
</ol>
<p>Using the App Service URL <code>https://&lt;prefix&gt;.azurewebsites.net</code>, browse to that web page. After authenticating you will see all the subscriptions to your offers. If you completed Lab 2, there should be at least one purchased subscription.</p>
<p>If you haven't completed Lab 2 by subscribing to your offer, please go do so now.</p>
<h2 id="exercise-as-a-customer-request-subscription-activation">Exercise: As a customer, request subscription activation<a class="headerlink" href="#exercise-as-a-customer-request-subscription-activation" title="Permanent link">#</a></h2>
<p>This exercise puts you in the place of the customer, and you will request your subscription be activated by the publisher.</p>
<ol>
<li>In the command text box at the top of the Azure portal, type "SaaS" and select <strong>SaaS</strong> from the dropdown. This takes you to the SaaS management page where you can monitor and manage all your SaaS offers.</li>
<li>Click the SaaS offer you subscribed to in Lab 2. Note that it is the <code>Pending Configuration</code> state. The publisher has not provisioned your account yet.</li>
<li>Click the <strong>Configure account now</strong> button. This takes you to the offer's landing page.</li>
<li>Under the <strong>Available Customer Actions</strong> section, click the link for <strong>Notify publisher to activate account</strong>. This emulates sending a notice to your publisher that you want to activate your subscription.</li>
</ol>
<h2 id="exercise-as-the-publisher-activate-the-customers-subscription">Exercise: As the publisher, activate the customer's subscription<a class="headerlink" href="#exercise-as-the-publisher-activate-the-customers-subscription" title="Permanent link">#</a></h2>
<p>This exercise puts you back in the role of the publisher, and you will activate the customer's subscription.</p>
<ol>
<li>Open the publisher portal website.</li>
<li>Find and click on the subscription that needs to be activated.</li>
<li>Notice the <strong>SaasSubscriptionStatus</strong> field is in the <code>PendingFulfillmentStart</code> state.</li>
<li>Scroll down to the <strong>Publisher Actions</strong> section.</li>
<li>Click the <strong>Activate this subscription</strong> link.</li>
<li>Notice the status immediately changes to <strong>Subscribed</strong>.</li>
</ol>
<h2 id="exercise-see-the-activation-on-the-client-side">Exercise: See the activation on the client side<a class="headerlink" href="#exercise-see-the-activation-on-the-client-side" title="Permanent link">#</a></h2>
<ol>
<li>Go back to the landing page for the offer and note the <strong>Subscription State</strong> now equals <code>Subscribed</code>.</li>
<li>Go back to the SaaS management screen and find your subscription. It likely still reads <code>Pending configuration</code>.</li>
<li>This page caches the state of the subscriptions and updates every few minutes. Try refreshing the page occasionally until it reads <code>Subscribed</code>.</li>
</ol>
<p><strong>Congratulations!</strong> You have finished this lab.</p>
<p>If you are in a live class setting, please raise your hand in Microsoft Teams to indicate you are done with the lab.</p>
<hr />
<p><strong>Congratulation!</strong> You have finished this lab.</p>
<p>👈 <a href="../../#labs">Back to SaaS Offer labs</a></p>


  


  



                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        ﻿<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>

    <link rel="stylesheet" type="text/css" href="styles.css" />
</head>
<body>

    <footer class="site-footer">
        <div class="container">

            <div class="col-1">
                <hr>
                <p class="site-footer__copyright">Copyright &copy; 2022. - Microsoft, Inc. <br>All rights reserved.</p>

            </div><!-- /.col -->
            <div class="col-2">
                <img alt="Microsoft Azure logo." src="/Mastering-the-Marketplace/assets/logo-footer.png" class="site-footer__logoimage">
            </div><!-- /.col -->
        </div>
    </footer><!-- /.site-footer -->

</body>
</html>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.sections", "navigation.expand"], "search": "../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.fc8c2696.min.js"></script>
      
    
  </body>
</html>